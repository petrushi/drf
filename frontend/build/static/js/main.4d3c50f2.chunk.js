(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,t,n){},59:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(33),o=n.n(r),a=(n(40),n(35)),i=n(8),j=n(9),l=n(11),u=n(10),h=n(13),d=n.n(h),b=n(24),O=(n(59),n(2)),p=n(0),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"logout",value:function(){this.props.setToken("")}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("nav",{className:"menu",children:[Object(p.jsx)("li",{children:Object(p.jsx)(O.b,{to:"/",children:"Users"})}),Object(p.jsx)("li",{children:Object(p.jsx)(O.b,{to:"/projects",children:"Projects"})}),Object(p.jsx)("li",{children:Object(p.jsx)(O.b,{to:"/todos",children:"Todos"})}),this.props.isAuthed?Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:this.props.username}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:function(){return e.logout()},children:" Logout"})]}):Object(p.jsx)("li",{style:{backgroundColor:"red"},children:Object(p.jsx)(O.b,{to:"/login",children:"Login"})})]})}}]),n}(s.a.Component),f=function(){return Object(p.jsx)("footer",{className:"footer",children:"Footer"})},m=function(e){var t=e.user;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsx)(O.b,{to:"users/".concat(t.id),children:t.username})}),Object(p.jsx)("td",{children:t.first_name}),Object(p.jsx)("td",{children:t.last_name}),Object(p.jsx)("td",{children:t.email})]})},v=function(e){var t=e.users;return Object(p.jsx)("div",{className:"users table",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Username"}),Object(p.jsx)("th",{children:"First name"}),Object(p.jsx)("th",{children:"Last name"}),Object(p.jsx)("th",{children:"Email"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsx)(m,{user:e})}))})]})})},g=function(e){var t=e.project,n=e.deleteProject;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsx)(O.b,{to:"projects/".concat(t.id),children:t.name})}),Object(p.jsx)("td",{children:Object(p.jsx)("a",{href:t.link,children:t.link})}),Object(p.jsx)("td",{children:t.users.map((function(e){return Object(p.jsx)(O.b,{to:"users/".concat(e),children:e})})).reduce((function(e,t){return[e," ",t]}),"")}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).handleInputChange=function(e){c.setState({searchLine:e.target.value});var t=c.props.projects.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));c.setState({projects:t})},c.state={searchLine:"",projects:c.props.projects},c}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"projects table",children:[Object(p.jsx)("div",{className:"searchForm",children:Object(p.jsx)("form",{children:Object(p.jsx)("input",{type:"text",id:"filter",placeholder:"Search for...",onChange:this.handleInputChange})})}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Link"}),Object(p.jsx)("th",{children:"Users"}),Object(p.jsx)("th",{children:"Delete"})]})}),Object(p.jsx)("tbody",{children:this.state.projects.map((function(t){return Object(p.jsx)(g,{project:t,deleteProject:e.props.deleteProject})}))})]}),Object(p.jsx)("div",{children:Object(p.jsx)(O.b,{to:"projects/create",children:"Create project"})})]})}}]),n}(s.a.Component),y=function(e){var t=e.todo,n=e.deleteTodo;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.text}),Object(p.jsx)("td",{children:Object(p.jsx)(O.b,{to:"/users/".concat(t.author),children:t.author})}),Object(p.jsx)("td",{children:Object(p.jsx)(O.b,{to:"/projects/".concat(t.project),children:t.project})}),Object(p.jsx)("td",{children:t.createdAt}),Object(p.jsx)("td",{children:t.isActive.toString()}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},C=function(e){var t=e.todos,n=e.deleteTodo;return Object(p.jsxs)("div",{className:"todos table",children:[Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Text"}),Object(p.jsx)("th",{children:"Author"}),Object(p.jsx)("th",{children:"Project"}),Object(p.jsx)("th",{children:"Created date"}),Object(p.jsx)("th",{children:"Is active"}),Object(p.jsx)("th",{children:"Delete"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsx)(y,{todo:e,deleteTodo:function(e){return n(e)}})}))})]}),Object(p.jsx)("div",{children:Object(p.jsx)(O.b,{to:"todos/create",children:"Create ToDo"})})]})},S=n(3),T=function(e){var t=e.todos,n=Object(S.g)().id,c=t.filter((function(e){return e.project.toString().includes(n)}));return Object(p.jsxs)("div",{className:"todos table",children:[Object(p.jsxs)("h2",{children:["List of ToDos for Project ",n]}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Text"}),Object(p.jsx)("th",{children:"Author"}),Object(p.jsx)("th",{children:"Project"}),Object(p.jsx)("th",{children:"Created at"}),Object(p.jsx)("th",{children:"Is active"})]})}),Object(p.jsx)("tbody",{children:c.map((function(e){return Object(p.jsx)(y,{todo:e})}))})]})]})},N=function(e){var t=e.todos,n=e.projects,c=Object(S.g)().id,s=t.filter((function(e){return e.author.toString().includes(c)})),r=n.filter((function(e){return e.users.toString().includes(c)}));return Object(p.jsxs)("div",{className:"todos table",children:[Object(p.jsxs)("h2",{children:[" User ",c," activity "]}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Projects"}),Object(p.jsx)("th",{children:"Todos"})]})}),Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:r.map((function(e){return Object(p.jsx)(O.b,{to:"/projects/".concat(e.id),children:e.name})})).reduce((function(e,t){return[e," ",t]}),"")}),Object(p.jsx)("td",{children:s.map((function(e){return Object(p.jsx)("div",{children:e.text})}))})]})})]})]})},A=n(15),D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={login:"",password:""},c}return Object(j.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(A.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.getToken(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(s.a.Component),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={name:"",link:"",users:[e.users]},c}return Object(j.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(A.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.link,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"name",children:"name"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"link",children:"link"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"link",value:this.state.link,onChange:function(t){return e.handleChange(t)}})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"users",children:"users"}),Object(p.jsx)("select",{name:"users",className:"form-control",onChange:function(t){return e.handleUserChange(t)},multiple:!0,children:this.props.users.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(p.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(s.a.Component),F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={text:"",project:e.projects,author:e.users,isActive:!1},c}return Object(j.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(A.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.text,this.state.project,this.state.author,this.state.isActive),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"text",children:"text"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"project",children:"project"}),Object(p.jsx)("select",{name:"project",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.projects.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"author",children:"author"}),Object(p.jsx)("select",{name:"author",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"isActive",children:"is active"}),Object(p.jsx)("input",{type:"checkbox",default:!0,className:"form-control",name:"isActive",value:this.state.isActive,onChange:function(){return e.setState((function(e){return{isActive:!e.isActive}}))}})]}),Object(p.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(s.a.Component),w=function(e){var t=e.location;return Object(p.jsx)("div",{className:"table",children:Object(p.jsxs)("h2",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"'\u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})},L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={users:[],projects:[],todos:[],token:"",username:""},c}return Object(j.a)(n,[{key:"createProject",value:function(e,t,n){var c=this,s=this.getHeaders(),r={name:e,link:t,users:n};d.a.post("http://127.0.0.1:8000/api/projects/?version=2",r,{headers:s}).then((function(e){c.loadData()})).catch((function(e){console.log(e),c.setState({projects:[]})}))}},{key:"createTodo",value:function(e,t,n,c){var s=this;"string"!==typeof t&&(t=t[0].id),"string"!==typeof n&&(n=n[0].id);var r=this.getHeaders(),o={text:e,project:t,author:n,isActive:c};d.a.post("http://127.0.0.1:8000/api/todos/?version=2",o,{headers:r}).then((function(e){s.loadData()})).catch((function(e){console.log(e),s.setState({todos:[]})}))}},{key:"deleteProject",value:function(e){var t,n=this,c=this.getHeaders(),s=this.state.todos.filter((function(t){return t.project==e})),r=Object(a.a)(s);try{for(r.s();!(t=r.n()).done;){var o=t.value;this.deleteTodo(o.id)}}catch(i){r.e(i)}finally{r.f()}d.a.delete("http://127.0.0.1:8000/api/projects/".concat(e),{headers:c}).then((function(e){n.loadData()})).catch((function(e){console.log(e)}))}},{key:"deleteTodo",value:function(e){var t=this,n=this.getHeaders();d.a.delete("http://127.0.0.1:8000/api/todos/".concat(e),{headers:n}).then((function(e){t.loadData()})).catch((function(e){console.log(e)}))}},{key:"loadData",value:function(){var e=this,t=this.getHeaders();d.a.get("http://127.0.0.1:8000/api/users/?version=2",{headers:t}).then((function(t){var n=t.data;e.setState({users:n.results})})).catch((function(t){console.log(t),e.setState({users:[]})})),d.a.get("http://127.0.0.1:8000/api/projects/?version=2",{headers:t}).then((function(t){var n=t.data;e.setState({projects:n.results})})).catch((function(t){console.log(t),e.setState({projects:[]})})),d.a.get("http://127.0.0.1:8000/api/todos/?version=2",{headers:t}).then((function(t){var n=t.data;e.setState({todos:n.results})})).catch((function(t){console.log(t),e.setState({todos:[]})}))}},{key:"isAuth",value:function(){return!!this.state.token}},{key:"setToken",value:function(e){var t=this;(new b.a).set("token",e),this.setState({token:e},(function(){return t.loadData()}))}},{key:"getToken",value:function(e,t){var n=this;d.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(t){n.setToken(t.data.token),n.setState({username:e})})).catch((function(e){return console.log(e)}))}},{key:"getTokenFromStorage",value:function(){var e=this,t=(new b.a).get("token");this.setState({token:t},(function(){return e.loadData()}))}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuth()&&(e.Authorization="Token "+this.state.token),e}},{key:"componentDidMount",value:function(){this.getTokenFromStorage()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("div",{className:"main",children:Object(p.jsxs)(O.a,{children:[Object(p.jsx)(x,{username:this.state.username,isAuthed:this.isAuth(),setToken:function(t){return e.setToken(t)}}),Object(p.jsxs)(S.d,{children:[Object(p.jsx)(S.b,{exact:!0,path:"/",component:function(){return Object(p.jsx)(v,{users:e.state.users})}}),Object(p.jsx)(S.b,{path:"/users/:id",children:Object(p.jsx)(N,{todos:this.state.todos,projects:this.state.projects})}),Object(p.jsx)(S.b,{exact:!0,path:"/projects/create",component:function(){return Object(p.jsx)(P,{users:e.state.users,createProject:function(t,n,c){return e.createProject(t,n,c)}})}}),Object(p.jsx)(S.b,{exact:!0,path:"/todos/create",component:function(){return Object(p.jsx)(F,{users:e.state.users,projects:e.state.projects,createTodo:function(t,n,c,s){return e.createTodo(t,n,c,s)}})}}),Object(p.jsx)(S.b,{exact:!0,path:"/projects",component:function(){return Object(p.jsx)(k,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(p.jsx)(S.b,{path:"/projects/:id",children:Object(p.jsx)(T,{todos:this.state.todos})}),Object(p.jsx)(S.b,{exact:!0,path:"/login",component:function(){return Object(p.jsx)(D,{getToken:function(t,n){return e.getToken(t,n)}})}}),Object(p.jsx)(S.b,{exact:!0,path:"/todos",component:function(){return Object(p.jsx)(C,{todos:e.state.todos,deleteTodo:function(t){return e.deleteTodo(t)}})}}),Object(p.jsx)(S.a,{from:"/users",to:"/"}),Object(p.jsx)(S.b,{component:w})]})]})}),Object(p.jsx)(f,{})]})}}]),n}(s.a.Component),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),r(e),o(e)}))};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(L,{})}),document.getElementById("root")),H()}},[[69,1,2]]]);
//# sourceMappingURL=main.4d3c50f2.chunk.js.map